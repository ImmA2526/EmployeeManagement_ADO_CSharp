<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/css/bootstrap-4.4.1-dist/bootstrap-4.4.1-dist/css/bootstrap.min.css" />
    <script type="text/javascript" src="/css/bootstrap-4.4.1-dist/bootstrap-4.4.1-dist/js/jquery-3.4.1.slim.min.js"></script>
    <script type="text/javascript" src="/css/bootstrap-4.4.1-dist/bootstrap-4.4.1-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/css/bootstrap-4.4.1-dist/bootstrap-4.4.1-dist/js/popper.min.js"></script>
    
    <link rel="stylesheet" href="/css/Reset.css" />
    <link rel="stylesheet" href="/css/EmployeeTable.css" />

    <title>Employee Management</title>
</head>

<body>

    <form class="forms1">
        <div class="header">
            <div class="heading">
                <h2>EMPLOYEE MANAGEMENT SERVICE</h2>
            </div>
            <ul class="nav nav-pills" id="ok">
                <li id="links" class="nav-item">
                    <a class="nav-link " href="EmployeeTable.html">Employee Management</a>
                </li>
                <li id="links" class="nav-item">
                    <a class="nav-link active" href="ResetPassword.html">Reset Password</a>
                </li>
                <li id="links" class="nav-item">
                    <a class="nav-link " href="Login.html">Logout</a>
                </li>
            </ul>
        </div>
    </form>

    <center>
        <form class="logform" method="get">
            <div class="h2">
                <h2>Employee Management</h2>
                <h2>Reset Password</h2>
            </div>
            <div class="form-group row">
                <div class="col-sm-11">
                    Old Password: <input type="password" id="oldPassword">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-11">
                    New Password:<input type="password" id="newPassword">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-11">
                    Confirm Password:<input type="password" id="confirmPassword">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-12">
                    <button type="button" id="resetBtn" class="btn btn-primary">Reset</button>

                </div>
            </div>
        </form>
    </center>


    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#resetBtn").click(function () {

                var OldPassword = $("#oldPassword").val();
                var NewPassword = $("#newPassword").val();
                console.log(OldPassword + "  " + NewPassword);

                $.ajax({
                    type: "PUT",
                    url: "/api/reset/" + OldPassword + "/" + NewPassword,
                    dataType: "",
                    contentType: "application/json; charset=utf-8",
                    processData: true,
                    success: function () {
                        alert("Password Updated successfully.");
                        window.location.href = "https://localhost:44302/HTML/EmployeeTable.html";
                        return true;
                    },
                    error: function () {
                        alert("Error While ResetPassword");
                    }
                });
            });
        });
    </script>

</body>
</html>